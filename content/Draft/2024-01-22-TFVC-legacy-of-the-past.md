В мире, где все смирились с доминацией git'а, всё ещё остаётся место для чего-то хорошего. Например, TFVC. С каждым годом становится всё сложнее находить актуальную информацию о TFVC. И это нужно исправлять.

---
Перед тем, как углубиться в мир TFS и TFVC нужно определиться с двумя понятиями: [Project management system](../Knowledge%20base/Project%20management/Project%20management%20system.md) и [Version control system](../Knowledge%20base/Project%20management/Version%20control%20system.md).

VCS - это системы для управлением исключительно кодом. И тут можно противопоставить [git](../Knowledge%20base/Tools/git/git.md) и [TFVC](../Knowledge%20base/Services/Azure%20DevOps/TFVC.md). PMS - это более комплексные системы, которые включают в себя и VCS, и инструменты для управления задачами и многое другое. И это уже про [Azure DevOps](../Knowledge%20base/Services/Azure%20DevOps/Azure%20DevOps.md), [GitHub](../Knowledge%20base/Services/Github/GitHub.md) и прочие.

Azure DevOps (который раньше назывался TFS) предоставляет много фичей для управления проекта, в том числе VCS. В ADO есть концепция project'а - это workspace, где существуют задачи, пользователи и код. Код в проектах хранится в репозиториях, которые могут быть двух типов: TFVC и git. ADO не привязывается к конкретной VCS и может совмещать сразу оба.

## git commit
Начнём с более классической VCS - git. Единицей изменения в git является коммит - это зафиксированный во времени набор изменений (дельта кода) относительно прошлого коммита:
```
A - Add A.txt, file B.txt
^
|
B - Change A.txt, add C.txt
^
|
C - Change A.txt, remove B.txt
```

Вторым важным термином в git являются ветки. Ветка - это указатель на определённый коммит.
```
A
^
|
B - master (released)
^
|
C
^
|
D - develop (actual)
```

Третьим важным термином является branching/merging. git позволяет от одного коммита создать:
```
A
^
|
B <- D - Separated feature
^
|
C <- master
```

Это позволяет разработчикам параллельно разрабатывать код и не мешать друг другу:
- Разработчик1 работает в ветке master над коммитом B и создаёт коммит C
- Разработчик2 не хочется мешать основной ветке, поэтому он создаёт новую ветку, которая ссылается на коммит B вне зависимости от ветки master. И когда ему потребуется сохранить изменения, то это будет коммит относительно коммита B.

Но ветки остаются просто ссылками на элементы дерева коммитов, их можно создавать, удалять, перемещать.

В момент, когда ветку всё же захочется влить в основную, нужно выполнить мёрдж. Мердж - это процесс создания коммита, который будет ссылаться на два коммита разных веток:
```
A
^
|
B <- D
^    ^
|    |
C   /
^  /
| /
E - merge commit, master now here
```

После мёрджа новый коммит будет содержать все изменения двух веток.

Помимо мёрджа есть ещё одна операция, которая позволяет переносить изменения между ветками - cherry-pick:
```
A
^
|
B <- D
^    ^
|    |
C    E
^    ^
|    |
Q    C1 <- copy changes from other branch
```

Cherry-pick создаёт новый коммит, который содержит такой же набор изменений, но никак не связан с оригинальным.

## TFVC changeset
В git основной всего являются коммиты, который образуют собой дерево. В TFVC основой являются ветки. Чейнджсеты (аналог коммитов в TFVC) существуют в контексте веток. Например, такая же ситуация с созданием ветки для отдельной разработки в TFVC:

```
A
^
|
B  <.. C (branching changeset)
^      ^
|      |
D      E < Feature branch
^
Master branch
```

Создание ветки в TFS влечёт за собой создание ветки и нового чейнджсета. Слияние веток также отличается. Из-за того, что основой в TFS являются ветки, иметь такую же модель, как в git не получится. Процесс сводится к созданию чейнджсетов из первой ветки во второй:

```
A
^
|
B  <.... C (branching changeset)
^        ^
|        |
D        E
^       /^
|      / |
E1 <--   F
^       /
|      /
F1 <--
```

В отличии от гита, мёрдж чейнджсета в другую ветку сохраняет информацию о том, что был смёрджен. Чейджсет можно мёрджить без мёрдж всей ветки. Это позволяет отслеживать историю переноса, а также получать информацию о том, какие изменения не были смёрдженны между ветками.